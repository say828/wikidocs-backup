## 01. 컴퓨팅 비용 절감: Savings Plans, 예약 인스턴스, 그리고 스팟 인스턴스

비용 가시성을 확보하여 우리 돈이 어디로 새고 있는지 명확히 파악했다면, 이제 실제 지출의 가장 큰 부분을 차지하는 **컴퓨팅 비용**에 대한 외과적인 수술을 시작할 차례다. AWS 컴퓨팅 비용의 기준점은 **온디맨드(On-Demand)** 가격이다. 이는 필요할 때마다 초 단위로 비용을 지불하는, 가장 유연하지만 동시에 가장 비싼 가격 모델이다. 이는 마치 여행 직전에 호텔 프런트에서 정가(Rack Rate)를 모두 지불하고 방을 예약하는 것과 같다. 단기 테스트나 트래픽 예측이 전혀 불가능한 워크로드에는 적합하지만, 안정적으로 운영되는 프로덕션 환경의 비용 모델로는 매우 비효율적이다.

비용 최적화의 핵심은 우리의 워크로드를 분석하여, **'예측 가능한 꾸준한 사용량'**과 **'예측 불가능한 변동 사용량'**을 분리하고, 각각에 맞는 가장 경제적인 구매 옵션을 전략적으로 조합하는 것이다. AWS는 이를 위해 크게 두 가지 할인 모델을 제공한다: **약정 기반 할인**과 **기회비용 기반 할인**이다.

---

### 약정 기반 할인: Savings Plans와 예약 인스턴스 (RIs)

"1년 동안 우리 호텔의 객실을 꾸준히 사용하겠다고 약속해주시면, 숙박료를 대폭 할인해 드리겠습니다." 이것이 바로 약정 기반 할인 모델의 핵심이다. AWS에 1년 또는 3년의 기간 동안 특정 양의 컴퓨팅 파워를 사용하겠다고 약정(Commitment)하는 대가로, 온디맨드 가격 대비 **최대 72%**에 달하는 파격적인 할인을 받을 수 있다. 이는 AWS가 장기적인 수요를 예측하고 자원 용량을 효율적으로 계획할 수 있게 해주기 때문에 가능한 할인이다.

1.  **Savings Plans (SP):**
    가장 현대적이고 유연한 약정 모델이다. Savings Plans는 특정 인스턴스 유형(예: `m5.large`)을 예약하는 것이 아니라, **시간당 컴퓨팅 사용량($/hour)을 약정**한다.
    * **Compute Savings Plans:** 가장 유연한 옵션이다. 예를 들어, "시간당 $10의 컴퓨팅 비용을 사용하겠다"고 약정하면, 이 약정 금액은 EC2 인스턴스(패밀리, 크기, OS, 리전 무관)뿐만 아니라 **Fargate**나 **Lambda** 사용량에도 자동으로 적용된다. 이는 마치 "우리 호텔 그룹의 어떤 지점에서든, 어떤 종류의 방이든 사용할 수 있는 시간당 $10짜리 바우처"를 구매하는 것과 같다. 기술 스택이 바뀌거나 리전을 이전하더라도 할인이 계속 적용되므로, 대부분의 경우 가장 추천되는 선택이다.
    * **EC2 Instance Savings Plans:** 특정 리전의 특정 인스턴스 패밀리(예: 서울 리전의 `m5` 패밀리)에 대한 사용을 약정하는 대신, Compute SP보다 더 높은 할인율을 제공한다.

2.  **예약 인스턴스 (Reserved Instances, RIs):**
    Savings Plans 이전에 주력으로 사용되던 전통적인 약정 모델이다. RI는 특정 가용 영역(AZ)에서 특정 인스턴스 유형 및 크기를 명시적으로 예약한다. 이는 마치 "A 호텔의 301호 오션뷰 킹 스위트룸을 1년간 예약합니다"라고 지정하는 것과 같아서, 유연성이 매우 떨어진다. 하지만 Convertible RI와 같이 일부 유연성을 제공하는 옵션도 존재한다.

**결론:** 새로운 약정을 고려한다면, 압도적인 유연성을 제공하는 **Savings Plans를 항상 우선적으로 선택**해야 한다.

---

### 기회비용 기반 할인: 스팟 인스턴스 (Spot Instances)

약정 기반 할인이 예측 가능한 워크로드를 위한 것이라면, **스팟 인스턴스**는 AWS의 **남아도는 예비 컴퓨팅 용량**을 활용하는 기회비용 기반의 파격적인 할인 모델이다. 이는 마치 항공사가 출발 직전까지 팔리지 않은 빈 좌석을 90% 할인된 가격으로 판매하는 것과 같다.



* **엄청난 할인율:** 스팟 인스턴스는 온디맨드 가격 대비 **최대 90%**까지 저렴할 수 있다. 이는 AWS가 어차피 놀고 있을 자원을 활용하여 추가 수익을 얻는 구조이기에 가능하다.
* **가장 큰 리스크 (중단 가능성):** 이 파격적인 할인의 대가는, AWS가 해당 예비 용량을 다시 필요로 할 때(온디맨드나 약정 사용자가 요청할 때) 우리에게 **2분의 사전 통지만을 주고 인스턴스를 회수(Reclaim)해 갈 수 있다**는 점이다. 항공사 비유로 돌아가면, 갑자기 정가 항공권을 구매한 승객이 나타나면 우리는 자리에서 일어나 비행기에서 내려야 하는 것이다.

이러한 특성 때문에, 스팟 인스턴스는 절대로 데이터베이스나 사용자의 실시간 요청을 처리하는 핵심 웹 서버처럼 중단되어서는 안 되는 **미션 크리티컬 워크로드에는 사용될 수 없다.**

**스팟 인스턴스가 이상적인 워크로드:**
* **상태 비저장(Stateless) 및 내결함성(Fault-tolerant) 애플리케이션:** 웹 서버 플릿의 일부처럼, Auto Scaling Group 내에서 인스턴스 몇 개가 사라져도 전체 서비스에 영향이 없는 경우.
* **배치 처리 및 데이터 분석:** 빅데이터 처리(Spark, Hadoop), 렌더링, 과학 시뮬레이션과 같이 작업이 중단되더라도 처음부터 다시 시작하거나 중단된 지점부터 이어할 수 있는 작업.
* **CI/CD 워크로드:** 개발 및 테스트를 위한 빌드 서버나 테스트 에이전트는 중단되어도 큰 문제가 되지 않으므로 스팟 인스턴스를 활용하여 비용을 크게 절감할 수 있다.

---

### 전략적 조합: 비용 최적화 포트폴리오

최고의 비용 최적화 전략은 이 세 가지 구매 옵션을 하나의 포트폴리오처럼 조합하여 사용하는 것이다.

1.  **베이스라인(Baseline) 부하:** 24시간 365일 꾸준히 실행되는, 예측 가능한 최소한의 워크로드(예: 최소한으로 유지되는 웹 서버, 데이터베이스)는 **Savings Plans**로 커버하여 가장 안정적인 최대 할인을 받는다.
2.  **변동(Spiky) 부하:** 트래픽 변화에 따라 Auto Scaling으로 동적으로 증감하는 인스턴스들은 **온디맨드**로 처리한다. 이 부분은 SP로 커버되지 않은 초과 사용량에 해당한다.
3.  **기회(Opportunistic) 부하:** 중단되어도 상관없는 내결함성 작업들은 **스팟 인스턴스**를 적극적으로 활용하여 비용을 극단적으로 절감한다.

이처럼 컴퓨팅 구매 옵션을 전략적으로 조합하는 것은, 더 이상 인프라 엔지니어만의 업무가 아니다. 이는 아키텍처 설계 단계에서부터 비즈니스 요구사항과 워크로드 특성을 고려하여, 기술적 결정이 재무적 결과에 어떤 영향을 미치는지 이해하는 현대 클라우드 아키텍트의 핵심 역량이다. 이제, 비용의 또 다른 큰 축인 스토리지 비용을 어떻게 최적화할지 알아보자.