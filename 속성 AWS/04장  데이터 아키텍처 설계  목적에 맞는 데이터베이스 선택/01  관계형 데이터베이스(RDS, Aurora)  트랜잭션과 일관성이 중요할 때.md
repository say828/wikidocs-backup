## 01. 관계형 데이터베이스(RDS, Aurora): 트랜잭션과 일관성이 중요할 때

NoSQL의 열풍과 빅데이터의 시대 속에서, 관계형 데이터베이스(Relational Database Management System, RDBMS)는 종종 낡고 경직된 기술로 치부되곤 한다. 그러나 이는 지극히 위험한 오해다. 비즈니스의 가장 핵심적인 데이터, 즉 단 1원의 오차나 단 한 건의 유실도 허용되지 않는 데이터를 다룰 때, 관계형 데이터베이스가 수십 년간 지켜온 **ACID 트랜잭션**과 **데이터 일관성**이라는 가치는 그 어떤 기술로도 대체할 수 없다.

**ACID**는 데이터베이스 트랜잭션이 안전하게 수행되기 위해 보장해야 할 네 가지 속성—**원자성(Atomicity), 일관성(Consistency), 고립성(Isolation), 지속성(Durability)**—을 의미한다. 이를 이해하기 위한 가장 고전적인 예시는 은행 계좌 이체다.

* **원자성:** A 계좌에서 10만 원을 인출하여 B 계좌로 입금하는 작업은 하나의 '원자'처럼 취급되어야 한다. 인출은 성공했지만 입금이 실패하는 중간 상태는 존재할 수 없다. 둘 다 성공하거나, 둘 다 실패하여 원래 상태로 완벽하게 되돌아가야 한다(Rollback).
* **일관성:** 트랜잭션 전후에 데이터베이스의 상태는 항상 일관된 규칙을 만족해야 한다. 계좌 이체 후에도 두 계좌의 잔고 총합은 이전과 동일해야 한다는 규칙이 깨져서는 안 된다.
* **고립성:** 여러 트랜잭션이 동시에 실행되더라도, 각 트랜잭션은 마치 혼자 실행되는 것처럼 서로에게 영향을 주지 않아야 한다. 내가 계좌 이체를 하는 도중에 다른 사람이 내 잔고를 조회하더라도, 이체가 완료되기 전의 어중간한 금액을 봐서는 안 된다.
* **지속성:** 일단 트랜잭션이 성공적으로 완료(Commit)되면, 그 결과는 시스템에 영구적으로 기록되어야 한다. 그 직후에 시스템에 정전이 발생하거나 장애가 나더라도 거래 기록은 절대 사라지지 않음을 보장한다.

'NextGen Commerce'의 주문 및 결제 시스템을 생각해 보자. 고객이 '구매 확정' 버튼을 누르는 순간, 재고 테이블에서는 상품 수량이 하나 줄어들어야 하고, 주문 테이블에는 새로운 주문이 기록되어야 하며, 결제 테이블에는 결제 정보가 생성되어야 한다. 이 모든 작업은 ACID 원칙에 따라 하나의 원자적 단위로 처리되어야만 한다. 바로 이런 시나리오에서 관계형 데이터베이스는 타협 불가능한 선택이다.

AWS는 이러한 핵심적인 워크로드를 위해 두 가지 강력한 관리형 관계형 데이터베이스 서비스를 제공한다: **RDS**와 **Aurora**. '관리형(Managed)'이라는 단어가 핵심이다. 이는 우리가 EC2에서 데이터베이스를 직접 설치할 때 짊어져야 했던 수많은 '차별성 없는 무거운 작업'—OS 설치, 데이터베이스 엔진 패치, 백업 설정, 고가용성 구성 등—을 AWS가 자동화해주고, 우리는 오직 스키마 설계와 쿼리 최적화에만 집중할 수 있음을 의미한다.

### Amazon RDS (Relational Database Service)

RDS는 MySQL, PostgreSQL, MariaDB, Oracle, SQL Server와 같은 익숙하고 검증된 오픈소스 및 상용 데이터베이스 엔진을 손쉽게 클라우드에서 운영할 수 있게 해주는 서비스다.

**RDS가 최적의 선택인 경우:**
* **온프레미스 데이터베이스 마이그레이션:** 기존 데이터 센터에서 사용하던 MySQL이나 Oracle 데이터베이스를 최소한의 애플리케이션 코드 수정으로 클라우드로 이전(Re-platform)하고자 할 때.
* **익숙한 엔진 활용:** 개발팀이 특정 데이터베이스 엔진(예: PostgreSQL)에 대한 깊은 경험과 노하우를 이미 보유하고 있어, 그 생태계와 기능을 그대로 활용하고 싶을 때.
* **단순함과 예측 가능성:** RDS는 수년간 검증된 안정적인 아키텍처를 가지고 있다. 클릭 몇 번으로 다중 AZ(Multi-AZ) 복제를 구성하여 장애 발생 시 자동으로 다른 가용 영역의 대기 인스턴스로 장애 조치(Failover)되도록 설정할 수 있어, 손쉽게 고가용성을 확보할 수 있다.

### Amazon Aurora

Aurora는 RDS의 편리함 위에, 클라우드 환경에 맞게 밑바닥부터 완전히 재설계된 AWS의 **클라우드 네이티브 관계형 데이터베이스**다. MySQL 및 PostgreSQL과 완벽하게 호환되면서도, 표준 엔진 대비 몇 배나 더 뛰어난 성능과 가용성을 제공한다.

Aurora의 혁신적인 아키텍처는 컴퓨팅(쿼리 처리)과 스토리지(데이터 저장)를 분리하는 데 있다. 데이터는 3개의 가용 영역에 걸쳐 총 6개의 복제본으로 저장되며, 이는 디스크 장애에 대한 극단적인 내구성과 가용성을 보장한다.

**Aurora가 월등한 선택인 경우:**
* **고성능 및 고가용성 요구사항:** 표준 MySQL보다 최대 5배, 표준 PostgreSQL보다 최대 3배 빠른 성능이 필요하며, 99.99% 이상의 극도로 높은 가용성을 요구하는 미션 크리티컬 애플리케이션에 적합하다.
* **읽기 확장성이 중요한 워크로드:** 최대 15개의 읽기 전용 복제본(Read Replica)을 거의 지연 시간 없이 추가할 수 있어, 읽기 트래픽이 많은 이커머스 플랫폼이나 소셜 미디어 애플리케이션에 이상적이다.
* **글로벌 데이터베이스:** Aurora Global Database 기능을 사용하면, 여러 AWS 리전에 걸쳐 1초 미만의 지연 시간으로 데이터를 복제할 수 있다. 이를 통해 전 세계 사용자에게 빠른 읽기 성능을 제공하고, 리전 전체에 재해가 발생하더라도 1분 이내에 다른 리전으로 장애 조치를 수행할 수 있다.

결론적으로, 'NextGen Commerce'의 **주문, 결제, 회원 정보**와 같이 데이터의 일관성이 비즈니스의 신뢰와 직결되는 핵심 도메인에서는 **Aurora PostgreSQL**을 선택하는 것이 가장 전략적인 결정이다. 이는 우리에게 친숙한 관계형 모델의 안정성과 함께, 클라우드가 제공하는 최고의 성능과 가용성을 동시에 안겨줄 것이다.

하지만 모든 데이터가 이토록 엄격한 일관성을 요구하는 것은 아니다. 수시로 구조가 바뀌는 상품 카탈로그, 폭발적으로 늘어나는 사용자 세션 데이터는 관계형 데이터베이스의 경직된 스키마와 수직 확장 모델에 담기에는 너무나 역동적이다. 이제 우리는 이들을 위한 새로운 집, NoSQL의 세계로 문을 열 시간이다.