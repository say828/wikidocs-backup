## 02. 플랫폼 엔지니어를 위한 필수 kubectl 플러그인과 CLI 도구 모음

`kubectl`은 의심할 여지 없이 쿠버네티스 클러스터와 상호작용하는 가장 기본적인, 그리고 가장 강력한 스위스 군용 칼이다. 하지만 최고의 장인일수록 자신의 손에 꼭 맞는, 특화된 연장을 직접 벼려 쓰는 법이다. 매일 수십, 수백 번씩 클러스터와 씨름하는 플랫폼 엔지니어에게, 기본 `kubectl`만으로는 비효율과 실수의 늪에 빠지기 쉽다. 터미널은 우리의 작업실이며, 이 작업실을 얼마나 효율적으로 꾸미느냐가 당신의 생산성과 플랫폼의 안정성을 결정한다. 🧰

이 절에서는 당신의 `kubectl`을 단순한 칼에서 정밀한 수술 도구 세트로 바꾸어 줄, 수많은 현장 경험을 통해 검증된 필수 플러그인과 CLI 도구들을 소개한다. 이것들은 단순히 예쁜 장난감이 아니다. 이것들은 당신의 인지 부하를 줄여주고, 치명적인 실수를 막아주며, 궁극적으로 당신이 더 중요한 아키텍처적 문제에 집중할 수 있도록 시간을 벌어주는 전략적 자산이다.

---

**krew: 플러그인 생태계로 들어가는 관문**

가장 먼저 설치해야 할 도구는, 다른 모든 도구를 설치하기 위한 도구다. **krew**는 `kubectl`을 위한 플러그인 매니저다. 마치 `apt`나 `brew`가 시스템 패키지를 관리하듯, krew는 수백 가지의 유용한 커뮤니티 플러그인들을 `kubectl krew install <plugin-name>`이라는 간단한 명령으로 설치하고 관리할 수 있게 해준다. krew를 설치하는 순간, 당신의 `kubectl`은 무한히 확장 가능한 플랫폼으로 변모한다.

---

**kubectx & kubens: 클러스터와 네임스페이스를 빛의 속도로**

멀티 클러스터, 멀티 환경을 관리하는 엔지니어의 하루는 수십 번의 컨텍스트(context) 전환으로 이루어진다. `kubectl config use-context <long-cluster-name>`과 `kubectl config set-context --current --namespace=<some-namespace>`를 반복해서 입력하는 것은 고통일 뿐만 아니라, 실수로 프로덕션 클러스터에 개발용 명령을 날리는 재앙의 씨앗이 된다.

**kubectx**와 **kubens**는 이 고통을 완벽하게 해결한다.
* `kubectx`: 여러 클러스터 컨텍스트의 목록을 보여주고, 간단한 상호작용으로 전환할 수 있게 해준다.
* `kubens`: 현재 컨텍스트 내의 네임스페이스 목록을 보여주고, 즉시 전환할 수 있게 해준다.

이 두 도구는 당신이 하루에 수백 번씩 아끼는 몇 초가 모여, 당신의 집중력을 얼마나 지켜주는지 실감하게 될 것이다.

---

**stern: 여러 파드의 로그를 동시에, 그리고 우아하게**

`kubectl logs -f <pod-name>`은 단일 파드의 로그를 보는 데는 훌륭하다. 하지만 `replicas: 5`인 디플로이먼트에서 발생하는 문제를 디버깅해야 한다면? 5개의 터미널을 열어놓고 5개의 `kubectl logs` 명령을 실행할 것인가?

**stern**은 이 문제를 해결하는 가장 우아한 방법이다. `stern <deployment-name>`과 같이 디플로이먼트나 서비스의 이름을 지정하면, stern은 해당 워크로드에 속한 **모든 파드**의 로그를 하나의 스트림으로 합쳐서 보여준다. 각 파드의 로그는 서로 다른 색상으로 구분되어, 여러 파드에 걸쳐 발생하는 복잡한 상호작용을 추적하는 것을 놀랍도록 쉽게 만들어준다.

---

**kubectl-tree: 리소스 간의 부모-자식 관계를 한눈에**

당신이 `Deployment`를 만들면, 쿠버네티스는 `ReplicaSet`을 만들고, `ReplicaSet`은 다시 `Pod`를 만든다. 이 소유권(ownership) 관계는 쿠버네티스의 핵심적인 개념이지만, `kubectl get all`만으로는 이 관계를 직관적으로 파악하기 어렵다.

**kubectl-tree** 플러그인은 이 보이지 않는 계층 구조를 명확한 트리 형태로 시각화해준다. `kubectl tree deployment my-app` 명령을 실행하면, `my-app` 디플로이먼트가 어떤 리플리카셋을 소유하고, 그 리플리카셋이 다시 어떤 파드들을 소유하고 있는지를 한눈에 보여준다. 이는 복잡한 워크로드의 구조를 이해하고 문제를 진단하는 데 강력한 통찰력을 제공한다.

---

이 외에도 수많은 보석 같은 도구들이 당신의 발견을 기다리고 있다. 중요한 것은 도구의 수가 아니라, 당신의 워크플로우에서 가장 반복적이고 고통스러운 지점을 찾아내고, 그 문제를 해결해 줄 적절한 도구를 당신의 연장통에 추가하는 것이다. 잘 벼려진 도구는 장인의 손을 자유롭게 하고, 그 자유는 곧 창의력으로 이어진다.