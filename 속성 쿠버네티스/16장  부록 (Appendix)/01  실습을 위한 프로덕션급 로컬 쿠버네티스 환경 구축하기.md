# 부록

이 책의 본문은 쿠버네티스라는 거대한 세계를 항해하기 위한 이론과 아키텍처, 즉 '지도'를 제공하는 데 집중했다. 하지만 최고의 지도도 직접 두 발로 땅을 밟고 탐험하지 않는다면 그저 종이 위의 그림일 뿐이다. 이 부록은 당신이 이론을 현실로 만들고, 이 책에서 배운 모든 개념을 당신의 손으로 직접 검증하며 체화할 수 있도록 돕는 실용적인 '탐험 장비' 목록과 사용 설명서다.

우리는 먼저 당신의 로컬 머신에, 단순한 장난감이 아닌 실제 프로덕션 환경과 거의 흡사한 다중 노드 쿠버네티스 클러스터를 구축하는 방법부터 시작할 것이다. 그리고 이 환경 위에서 당신의 생산성을 극대화해 줄 필수 `kubectl` 플러그인과 CLI 도구들을 소개할 것이다. 마지막으로, 이 책의 여정이 끝난 후에도 당신이 클라우드 네이티브 생태계라는 광활한 우주를 계속해서 탐험해 나갈 수 있도록, CNCF 프로젝트들을 학습하기 위한 추천 로드맵을 제시하며 우리의 마지막 이정표를 세우고자 한다.

-----

## 01\. 실습을 위한 프로덕션급 로컬 쿠버네티스 환경 구축하기

이 책의 모든 예제와 아키텍처를 실습하기 위해, 우리는 `minikube`나 `Docker Desktop`의 단일 노드 쿠버네티스보다 한 단계 더 나아간 환경이 필요하다. 실제 운영 환경은 여러 개의 노드로 구성되며, 노드 장애나 파드 스케줄링의 복잡성을 이해하기 위해서는 다중 노드 클러스터가 필수적이다. 또한, Ingress Controller와 같은 핵심 컴포넌트를 제대로 테스트하기 위해서는 클러스터 외부와 통신할 수 있는 명확한 진입점이 필요하다.

이러한 요구사항을 가장 가볍고, 빠르고, 그리고 선언적으로 만족시키는 최고의 도구는 바로 \*\*kind(Kubernetes in Docker)\*\*다. 이름 그대로, kind는 도커 컨테이너를 쿠버네티스 '노드'로 사용하여, 당신의 로컬 머신 안에 완벽하게 격리된 다중 노드 쿠버네티스 클러스터를 단 몇 분 안에 생성하고 파괴할 수 있게 해준다.

**1단계: 필수 도구 설치**

먼저, 당신의 로컬 머신에 다음 도구들이 설치되어 있는지 확인하라.

  * **Docker:** 컨테이너를 실행하기 위한 엔진. (Docker Desktop, Colima, Rancher Desktop 등)
  * **kubectl:** 쿠버네티스 클러스터와 통신하기 위한 CLI.
  * **kind:** kind 클러스터를 관리하기 위한 CLI.

**2단계: kind 클러스터 설정 파일 작성**

우리는 컨트롤 플레인 1개와 워커 노드 3개로 구성된 클러스터를 만들 것이다. 또한, Ingress Controller가 외부 트래픽을 받을 수 있도록 호스트 머신의 특정 포트(예: 80, 443)를 워커 노드의 포트와 매핑하는 설정이 필요하다. 다음 내용을 `kind-cluster-config.yaml` 파일로 저장하라.

```yaml
# kind-cluster-config.yaml
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
  # Ingress Controller를 위한 포트 포워딩 설정
  kubeadmConfigPatches:
  - |
    kind: InitConfiguration
    nodeRegistration:
      kubeletExtraArgs:
        node-labels: "ingress-ready=true"
  extraPortMappings:
  - containerPort: 80
    hostPort: 80
    protocol: TCP
  - containerPort: 443
    hostPort: 443
    protocol: TCP
- role: worker
- role: worker
- role: worker
```

**3단계: 클러스터 생성**

이제 터미널에서 다음 명령을 실행하여 클러스터를 생성한다. kind는 도커를 이용해 4개의 컨테이너(노드)를 띄우고, 그 안에 쿠버네티스를 자동으로 설치할 것이다.

```bash
kind create cluster --config kind-cluster-config.yaml --name masterpiece
```

**4단계: Ingress Controller 배포**

클러스터가 준비되면, 외부 트래픽을 처리할 Ingress Controller를 설치해야 한다. 여기서는 가장 표준적인 NGINX Ingress Controller를 배포한다.

```bash
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml
```

이 명령은 NGINX Ingress Controller를 배포하고, `kind-cluster-config.yaml`에서 설정한 포트 포워딩을 통해 호스트의 80/443 포트로 들어오는 요청을 받아 처리할 수 있도록 준비시킨다. 배포가 완료될 때까지 잠시 기다리자.

```bash
kubectl wait --namespace ingress-nginx \
  --for=condition=ready pod \
  --selector=app.kubernetes.io/component=controller \
  --timeout=90s
```

이제 당신의 로컬 머신은 이 책의 모든 실습을 수행할 준비가 된, 작지만 강력한 프로덕션급 쿠버네티스 플랫폼이 되었다. 당신은 이 환경 안에서 마음껏 파드를 생성하고, 오퍼레이터를 배포하며, 심지어는 클러스터 자체를 파괴하고 다시 만드는 모든 과정을 안전하게 실험해볼 수 있다. 이 격리된 실험실은 당신이 아키텍트로서 성장하는 가장 훌륭한 놀이터가 되어줄 것이다.