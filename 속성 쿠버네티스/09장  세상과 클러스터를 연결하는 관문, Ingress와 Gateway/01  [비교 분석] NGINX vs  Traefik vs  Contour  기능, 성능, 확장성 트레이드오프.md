## 01. [비교 분석] NGINX vs. Traefik vs. Contour: 기능, 성능, 확장성 트레이드오프

Ingress Controller를 선택하는 것은 단순히 기술 스택 목록에 항목 하나를 추가하는 행위가 아니다. 그것은 당신의 플랫폼이 외부 세계와 소통하는 방식, 즉 트래픽 관리의 철학을 결정하는 중대한 아키텍처적 선택이다. 세상에 '최고의' Ingress Controller는 존재하지 않는다. 오직 당신의 팀의 기술 성숙도, 애플리케이션의 특성, 그리고 플랫폼의 미래 방향성에 '가장 적합한' 컨트롤러만이 존재할 뿐이다.

이 거대한 시장에는 수많은 플레이어들이 있지만, 오늘날 생태계는 크게 세 가지 철학을 대표하는 거인들로 압축된다. 바로 **전통의 강자 NGINX**, **클라우드 네이티브의 총아 Traefik**, 그리고 **차세대 아키텍처의 선두주자 Contour**다. 이들의 내부를 깊이 들여다보고, 그들의 강점과 약점을 가감 없이 비교 분석해 보자.

---

### NGINX Ingress Controller: 전장에서 단련된 베테랑

NGINX는 웹 서버와 리버스 프록시의 세계에서 수십 년간 그 성능과 안정성을 증명해 온 살아있는 전설이다. 쿠버네티스 커뮤니티가 공식적으로 유지보수하는 `ingress-nginx`는 바로 이 강력한 NGINX 엔진을 쿠버네티스 세계로 가져온 것이다.

* **아키텍처:** NGINX Ingress Controller의 작동 방식은 매우 고전적이고 직관적이다. 컨트롤러 프로세스는 쿠버네티스 API를 감시하며 Ingress 리소스의 변경 사항을 감지한다. 그리고 그 규칙들을 NGINX가 이해할 수 있는 `nginx.conf` 파일로 변환한 뒤, NGINX 프로세스에 리로드(reload) 신호를 보낸다.
* **장점:**
    * **성능과 안정성:** NGINX의 성능은 의심의 여지가 없다. 수많은 대규모 트래픽 환경에서 검증되었으며, 매우 세밀한 성능 튜닝이 가능하다.
    * **풍부한 기능:** NGINX가 수십 년간 쌓아온 모든 기능(고급 캐싱, 압축, 수많은 모듈 등)을 **어노테이션(annotation)**을 통해 활용할 수 있다. `nginx.ingress.kubernetes.io/proxy-body-size` 와 같은 수백 개의 어노테이션은 NGINX를 거의 무한에 가깝게 커스터마이징할 수 있게 해준다.
    * **익숙함:** 이미 수많은 엔지니어들이 NGINX의 설정과 디버깅에 익숙하다. 이는 문제 해결과 운영에 있어 거대한 자산이 된다.
* **단점:**
    * **정적인 설정 모델:** 새로운 설정이 적용될 때마다 NGINX 프로세스를 리로드해야 한다는 점은 가장 큰 약점이다. 비록 최신 버전에서는 동적 리로딩 기능이 많이 개선되었지만, 근본적으로는 정적인 설정 파일에 기반한 아키텍처다.
    * **어노테이션 지옥 (Annotation Hell):** 풍부한 기능은 곧 수많은 비표준 어노테이션에 대한 의존성을 의미한다. Ingress 리소스는 NGINX 전용 어노테이션으로 뒤덮여 가독성을 해치고, 다른 Ingress Controller로의 마이그레이션을 극도로 어렵게 만든다.

**선택 가이드:** 팀이 이미 NGINX에 대한 깊은 전문성을 가지고 있고, 검증된 성능과 안정성, 그리고 세밀한 제어 능력을 최우선으로 생각한다면 NGINX는 여전히 가장 확실한 선택지다.

---

### Traefik: 개발자를 위한 동적 라우터

Traefik은 처음부터 쿠버네티스와 같은 동적인 클라우드 네이티브 환경을 위해 태어난 엣지 라우터(Edge Router)다. Traefik의 핵심 철학은 **"설정은 단순하게, 발견은 자동으로"** 이다.

* **아키텍처:** Traefik은 쿠버네티스 API를 포함한 다양한 '프로바이더(Provider)'를 감시하며, 라우팅 규칙의 변경을 실시간으로 자신의 메모리 내 설정에 반영한다. NGINX처럼 설정 파일을 디스크에 쓰고 프로세스를 리로드하는 과정이 전혀 없다. 이것이 바로 **동적 설정(Dynamic Configuration)**의 힘이다.
* **장점:**
    * **사용의 용이성:** Traefik은 복잡한 설정을 최소화하고 '그냥 작동하는' 경험을 제공하는 데 집중한다. 특히 Let's Encrypt를 이용한 TLS 인증서 자동 발급 기능이 내장되어 있어 HTTPS 설정이 놀랍도록 간편하다.
    * **동적 리로딩:** 설정 변경이 즉시, 그리고 중단 없이 반영된다. 이는 잦은 배포가 일어나는 마이크로서비스 환경에 최적화된 특징이다.
    * **직관적인 CRD:** 복잡한 어노테이션 대신, `IngressRoute`와 같은 자체 CRD를 통해 라우팅 규칙을 훨씬 더 명확하고 구조적으로 정의할 수 있다.
* **단점:**
    * **최고 성능의 한계:** 일반적인 상황에서는 충분히 훌륭한 성능을 보여주지만, 극도로 높은 트래픽을 처리해야 하는 엣지 케이스에서는 세밀하게 튜닝된 NGINX에 비해 성능상 열세일 수 있다는 인식이 있다.
    * **기능의 깊이:** NGINX가 수십 년간 쌓아온 모든 변태적인 기능들을 다 갖추고 있지는 않을 수 있다.

**선택 가이드:** 개발자 경험(DevEx)과 빠른 개발 사이클을 중시하며, 복잡한 설정보다는 단순함과 자동화를 선호하는 팀에게 최고의 선택이다.

---

### Contour: Envoy 기반의 아키텍처적 선택

Contour는 앞선 둘과는 다른 길을 걷는다. Contour의 핵심은 **컨트롤 플레인(Control Plane)과 데이터 플레인(Data Plane)의 명확한 분리**라는, 현대적인 네트워크 아키텍처의 모범 답안을 따르는 것이다.

* **아키텍처:** Contour는 두 개의 컴포넌트로 나뉜다. **Contour** 파드는 쿠버네티스 API를 감시하고 라우팅 규칙을 번역하는 '두뇌', 즉 컨트롤 플레인의 역할을 한다. 그리고 이 두뇌가 내린 명령을 받아 실제 트래픽을 처리하는 '근육', 즉 데이터 플레인으로 클라우드 네이티브의 사실상 표준 프록시인 **Envoy**를 사용한다.
* **장점:**
    * **Envoy의 힘:** 세계 최고의 성능과 확장성, 관측 가능성을 자랑하는 Envoy를 데이터 플레인으로 사용한다는 것 자체가 가장 큰 장점이다. Istio와 같은 서비스 메시에서도 사용하는 검증된 기술이다.
    * **깨끗한 API와 위임:** Contour는 `HTTPProxy`라는 자체 CRD를 통해 매우 깨끗하고 구조적인 라우팅 규칙을 제공한다. 특히, 플랫폼 관리자가 루트 도메인(`example.com`)을 관리하고, 각 개발팀은 자신의 경로(`/app1`)에 대한 라우팅 규칙만을 안전하게 위임(delegate)할 수 있도록 설계되어 있어 멀티테넌시 환경에 매우 강력하다.
    * **미래 지향성:** Contour는 Ingress의 한계를 극복하기 위한 차세대 표준인 Gateway API 개발에 가장 적극적으로 참여하고 있으며, 이미 그 구현을 선도하고 있다.
* **단점:**
    * **초기 학습 곡선:** 분리된 아키텍처와 Envoy라는 새로운 구성 요소는 NGINX나 Traefik에 비해 처음 접하는 엔지니어에게 약간 더 복잡하게 느껴질 수 있다.
    * **상대적으로 작은 커뮤니티:** NGINX의 거대한 커뮤니티나 Traefik의 활발한 개발자 팬덤에 비해서는 상대적으로 조용한 편이다.

**선택 가이드:** 플랫폼의 장기적인 확장성과 아키텍처의 정합성을 중요시하는 플랫폼 팀, 특히 여러 개발팀을 지원하는 내부 개발자 플랫폼(IDP)을 구축하는 경우 가장 현명한 선택이 될 수 있다.

---

**[도표: Ingress Controller 3대장 핵심 비교]**

| 구분 | NGINX Ingress Controller | Traefik | Contour |
| :--- | :--- | :--- | :--- |
| **핵심 기술** | NGINX | Traefik Proxy (Go) | Envoy |
| **설정 모델** | 정적 (파일 리로드) | 동적 (인메모리) | 동적 (xDS API) |
| **설정 방식** | 어노테이션 중심 | CRD (`IngressRoute`) | CRD (`HTTPProxy`) |
| **장점** | 검증된 성능, 풍부한 기능 | 사용 편의성, 자동화 | 아키텍처, Envoy, 위임 |
| **적합한 환경** | NGINX 전문가 조직 | 개발자 중심, 빠른 배포 | 플랫폼 팀, 멀티테넌시 |

이제 우리는 클러스터의 관문을 지킬 장수를 선택할 수 있는 지혜를 얻었다. 하지만 어떤 장수를 선택하든, 이 관문을 통과하는 모든 통신을 암호화하여 안전하게 지키는 것은 우리의 기본 임무다. 다음 절에서는 Cert-manager를 이용해 이 임무를 완전히 자동화하는 방법을 알아볼 것이다.