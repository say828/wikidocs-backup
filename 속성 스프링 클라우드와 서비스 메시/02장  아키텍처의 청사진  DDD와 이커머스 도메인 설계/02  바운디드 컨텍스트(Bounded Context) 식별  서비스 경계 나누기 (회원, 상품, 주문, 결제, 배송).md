## 바운디드 컨텍스트(Bounded Context) 식별: 서비스 경계 나누기 (회원, 상품, 주문, 결제, 배송)

앞서 정의한 **유비쿼터스 랭귀지(UL)**는 우리에게 강력한 '단서'를 제공했습니다. 바로 '같은 용어가 다른 의미로 쓰이는 지점'입니다. '상품'이라는 단어가 '전시' 컨텍스트와 '재고' 컨텍스트에서 다르게 쓰이는 것을 확인했습니다.

**바운디드 컨텍스트(Bounded Context, BC)**는 이 단서들을 모아, **유비쿼터스 랭귀지가 100% 일관성을 갖는 명확한 '경계'**를 긋는 작업입니다. 이 경계 안에서 `Product`는 오직 하나의 의미만을 가져야 합니다.

MSA 설계에서 **이 '바운디드 컨텍스트' 하나가 '마이크로서비스' 하나**가 됩니다.

이 경계를 나누는 기준은 '데이터'나 '기능'이 아니라 **'비즈니스 책임(Business Capability)'**이 되어야 합니다. "이 서비스는 비즈니스적으로 어떤 책임을 완수하는가?"라는 질문을 던져야 합니다.

우리의 이커머스 프로젝트에서는 00장에서 정의한 5개의 핵심 도메인을 기반으로 다음과 같이 5개의 바운디드 컨텍스트를 식별할 수 있습니다.

---

### 1. 회원(Membership) 컨텍스트

* **핵심 책임 (Responsibility):** 고객의 '신원(Identity)'을 관리하고 인증(Authentication)을 책임집니다.
* **주요 UL:** `회원(Member)`, `회원 등급(Member Grade)`
* **주요 기능:** 회원 가입, 로그인(인증), 회원 정보 조회 및 수정, 회원 탈퇴.
* **경계:** '회원'의 구매 내역(Order)이나 배송지(Shipping) 정보는 `회원` 컨텍스트의 핵심 책임이 아닙니다. 이 컨텍스트는 오직 '신원' 관리에만 집중합니다.
* **결과:** `member-service` (회원 마이크로서비스)

### 2. 상품(Product) 컨텍스트

* **핵심 책임 (Responsibility):** 판매할 상품의 정보를 '전시'하고, 판매 가능한 '재고'를 관리합니다.
* **주요 UL:** `상품(Product)`, `SKU(Stock Keeping Unit)`, `판매 가격(Sales Price)`, `재고 수량(Stock Quantity)`
* **주요 기능:** 상품 등록/수정/조회, 카테고리 관리, 재고 관리(입고/차감).
* **경계:** '상품'이 '누구에게' 팔렸는지(Order)는 이 컨텍스트의 관심사가 아닙니다. 오직 '판매할 대상'과 '판매할 재고'에만 집중합니다.
* **결과:** `product-service` (상품 마이크로서비스)
* ***(저자 주):*** *매우 복잡한 이커머스라면, '상품 전시'를 담당하는 `카탈로그(Catalog) 컨텍스트`와 '재고'를 담당하는 `재고(Inventory) 컨텍스트`를 분리하는 것이 정석입니다. 하지만 이 책의 여정에서는 먼저 '상품'이라는 하나의 BC로 묶어 시작하고, 필요시 09장(CQRS) 등에서 이 모델을 분리하는 리팩토링을 암시할 것입니다.*

### 3. 주문(Ordering) 컨텍스트

* **핵심 책임 (Responsibility):** 고객의 구매 요청(주문)을 생성하고, 그 상태(Lifecycle)를 추적합니다.
* **주요 UL:** `주문(Order)`, `주문 항목(Order Line)`, `주문 가격(Order Price)`, `주문 상태(Order Status)`
* **주요 기능:** 주문 생성(장바구니 포함), 주문 내역 조회, 주문 취소.
* **경계:** '주문'은 '어떻게' 결제되었는지(Payment) 상세히 알 필요가 없습니다. 단지 '결제 완료(PAID)'라는 '주문 상태'만 관리합니다. 마찬가지로 '어떻게' 배송되는지(Shipping) 알 필요 없이, '배송 시작(SHIPPED)' 상태만 알면 됩니다.
* **결과:** `order-service` (주문 마이크로서비스)

### 4. 결제(Payment) 컨텍스트

* **핵심 책임 (Responsibility):** `주문`에 대한 '금액 지불'을 처리하고, 환불을 관리합니다.
* **주요 UL:** `결제(Payment)`
* **주요 기능:** 외부 PG(결제 대행사) 연동을 통한 결제 시도, 결제 승인/실패 처리, 결제 취소(환불).
* **경계:** '결제'는 어떤 '상품'이 결제되는지(Product) 관심 없습니다. 오직 `주문` 컨텍스트로부터 전달받은 `주문 번호`와 `결제할 총액`에만 집중합니다.
* **결과:** `payment-service` (결제 마이크로서비스)

### 5. 배송(Shipping) 컨텍스트

* **핵심 책임 (Responsibility):** '결제가 완료된' 주문을 고객에게 물리적으로 전달하는 프로세스를 관리합니다.
* **주요 UL:** `배송(Shipment)`, `송장 번호(Tracking Number)`
* **주요 기능:** '결제 완료' 이벤트 수신, 배송 요청 생성(출고 지시), 송장 번호 발급 및 배송 상태 추적.
* **경계:** '배송'은 `주문`이 '얼마에' 결제되었는지(Payment) 관심 없습니다. 오직 '배송할 `주문 항목`'과 '배송지 주소'에만 집중합니다.
* **결과:** `shipping-service` (배송 마이크로서비스)

---

이 5개의 바운디드 컨텍스트(BC)는 이제 우리가 구축할 5개의 독립적인 마이크로서비스의 '청사진'이 되었습니다.

이제 남은 질문은 이것입니다: **"그래서 이 서비스들은 서로 어떻게 대화(통신)해야 하는가?"**

이 질문에 대한 답이 바로 다음 절의 '컨텍스트 맵'입니다.