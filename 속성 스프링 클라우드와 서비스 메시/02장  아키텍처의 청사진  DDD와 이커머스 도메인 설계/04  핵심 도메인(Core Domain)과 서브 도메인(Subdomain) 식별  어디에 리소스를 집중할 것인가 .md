## 핵심 도메인(Core Domain)과 서브 도메인(Subdomain) 식별: 어디에 리소스를 집중할 것인가?

우리는 02장 01절에서 전체 '이커머스'라는 거대한 **도메인(Domain)**을 '회원', '상품', '주문', '결제', '배송'이라는 5개의 **서브 도메인(Subdomain)**으로 분리했습니다. 그리고 02장 02절에서는 이 서브 도메인을 구현할 `바운디드 컨텍스트(BC)`를 식별했습니다.

이제 DDD의 가장 **전략적인** 질문에 답할 차례입니다.

> "이 5개의 서브 도메인(서비스)은 모두 똑같이 중요한가?"
> "우리의 한정된 개발 리소스(최고급 엔지니어, 시간, 비용)를 어디에 가장 많이 투입해야 하는가?"

모든 비즈니스에는 '핵심 경쟁력'이 있고, '있으면 좋지만 필수적이지 않은 것', 그리고 '돈 주고 사 와도 되는 것'이 있습니다. DDD는 이 비즈니스 가치에 따라 서브 도메인을 3가지로 분류할 것을 요구합니다.

---

### 1. 핵심 도메인 (Core Domain)

* **정의:** 우리 비즈니스의 **'핵심 경쟁력'** 그 자체입니다. 고객이 경쟁사가 아닌 우리 서비스를 선택하는 유일한 이유이며, 우리 비즈니스의 '비밀 병기(Secret Sauce)'입니다.
* **전략:** **절대 아웃소싱하거나 외부 솔루션을 사서 쓰면 안 됩니다.** 회사의 최고급 엔지니어를 모두 여기에 투입해야 합니다. 가장 유연하고, 가장 확장 가능하며, 가장 견고하게 설계되어야 합니다. (이후 10장 SAGA, 12장 WebFlux/코루틴 등 고급 기술이 모두 여기에 적용됩니다.)
* **우리의 선택:** **`주문(Ordering)`**과 **`상품(Product)`**
    * `주문`: 얼마나 쉽고, 빠르고, 안정적으로 '주문'을 완료시키는지는 이커머스의 심장입니다. (10장 SAGA 적용 대상)
    * `상품`: '재고'를 얼마나 실시간으로 정확하게 관리하고(09장 CQRS 적용 대상), '상품'을 얼마나 매력적으로 전시/추천하는지는 매출과 직결됩니다.

### 2. 지원 서브 도메인 (Supporting Subdomain)

* **정의:** 비즈니스를 운영하기 위해 **필수적**이지만, 그 자체가 '핵심 경쟁력'은 아닌 도메인입니다. 비즈니스 고유의 로직이 포함되어 있어 외부 솔루션을 사서 쓰기는 애매합니다.
* **전략:** **직접(In-house) 구축**하되, '핵심 도메인'처럼 과도하게 복잡한 엔지니어링을 투입할 필요는 없습니다. 표준적인 아키텍처와 검증된 기술로 '잘' 만들면 됩니다.
* **우리의 선택:** **`회원(Membership)`**과 **`배송(Shipping)`**
    * `회원`: 로그인/가입은 필수 기능이지만, '로그인이 잘된다'고 해서 우리 쇼핑몰을 쓰지는 않습니다. (단, '회원 등급'과 '포인트' 로직이 매우 복잡하고 핵심 경쟁력이라면 Core Domain이 될 수도 있습니다.)
    * `배송`: 배송도 필수 기능이지만, 우리 고유의 '배송 추적' 로직이 필요할 뿐, 이 자체가 경쟁력은 아닙니다. (단, 우리가 '쿠팡'처럼 로켓배송 물류 시스템을 직접 구축한다면 `배송`은 Core Domain이 됩니다.)

### 3. 일반 서브 도메인 (Generic Subdomain)

* **정의:** '이미 세상에 정답이 있는' 문제 영역입니다. 모든 비즈니스가 필요로 하지만, 전혀 차별점이 없는 기능입니다. (예: 이메일 발송, SMS 발송, 신용카드 결제 처리)
* **전략:** **절대 직접(In-house) 구축하지 않습니다. 100% 외부 솔루션(SaaS)을 구매하거나 오픈소스를 활용합니다.** 우리의 `payment-service`는 신용카드 번호를 직접 처리하는 시스템이 되어서는 안 됩니다.
* **우리의 선택:** **`결제(Payment)`**
    * `결제`: 신용카드 승인, 본인 인증, PCI-DSS 보안 규격 준수 등은 매우 복잡하지만 '해결된 문제'입니다. '아임포트', '토스페이먼츠', 'Stripe' 같은 외부 PG(Payment Gateway) 솔루션을 사서 쓰는 것이 현명합니다.
    * 우리의 `payment-service`는 이 외부 PG를 호출하고, 그 결과를 `주문` 서비스에 알려주는 **'어댑터(Adapter)' 또는 '파사드(Facade)'**의 역할(10장 SAGA)만 수행하면 됩니다.

---

### 결론: 전략적 리소스 분배

이 분류 작업이 끝난 지금, 우리는 아키텍처의 '청사진'을 완성했습니다.

* **`주문` / `상품` (Core):** 우리의 모든 역량을 집중합니다. 최고의 엔지니어가 가장 유연한 구조로 설계합니다.
* **`회원` / `배송` (Supporting):** 표준적인 MSA 구조로 견고하게 직접 구현합니다.
* **`결제` (Generic):** 외부 솔루션을 연동하는 '어댑터'로 구현하여 리소스를 아낍니다.

이제 우리는 '어디에' 집중해야 할지 명확히 알게 되었습니다. 다음 단계는 '어떻게' 이 도메인 모델을 코드 레벨에서 견고하게 설계할지, DDD의 전술적 패턴(애그리거트)을 살펴보는 것입니다.