### 생성자: 주 생성자(Primary Constructor)와 부 생성자(Secondary Constructor)

이전 예제에서는 객체를 먼저 생성한 뒤, `person.name = "홍길동"` 처럼 프로퍼티 값을 일일이 할당했습니다. 하지만 '사람' 객체라면 이름과 태어난 해는 객체가 만들어지는 시점에 반드시 정해져야 하는 필수 정보입니다. 이렇게 객체가 생성되는 바로 그 순간에 프로퍼티를 초기화하고 필수적인 데이터를 전달받기 위해 사용하는 것이 바로 \*\*생성자(Constructor)\*\*입니다.

코틀린의 클래스는 두 종류의 생성자를 가질 수 있습니다: \*\*주 생성자(Primary Constructor)\*\*와 **부 생성자(Secondary Constructor)**.

-----

#### 주 생성자 (Primary Constructor): 간결함의 미학

**주 생성자**는 클래스의 핵심적인 생성 메커니즘을 정의하며, 클래스 헤더(header)의 일부로 선언됩니다. **클래스당 최대 하나만** 가질 수 있으며, 대부분의 경우 주 생성자 하나만으로 충분합니다.

주 생성자를 사용하는 가장 간결하고 이상적인 방법은 다음과 같습니다.

```kotlin
// 클래스 이름 뒤 괄호 안에 파라미터를 선언하고, val 또는 var를 붙여 바로 프로퍼티로 만듭니다.
class Person(val name: String, val birthYear: Int) {
    // 본문에는 다른 로직을 추가할 수 있습니다.
    fun introduce() {
        println("안녕하세요, 저는 ${name}입니다. ${birthYear}년에 태어났습니다.")
    }
}
```

이 코드는 놀랍도록 많은 일을 한 번에 처리합니다.

1.  `name`과 `birthYear`를 파라미터로 받는 **생성자를 정의**합니다.
2.  `name`과 `birthYear`라는 이름의 **프로퍼티를 선언**합니다.
3.  객체가 생성될 때 전달받은 인자를 해당 \*\*프로퍼티에 자동으로 할당(초기화)\*\*합니다.

자바였다면 생성자, 필드 선언, `this.name = name`과 같은 할당 코드를 모두 따로 작성해야 했을 것입니다. 코틀린의 주 생성자는 이 모든 보일러플레이트를 단 한 줄로 압축합니다.

이제 `Person` 객체를 만들 때는 반드시 생성자에 필요한 인자를 전달해야 합니다.

```kotlin
fun main() {
    // 생성자 파라미터에 맞춰 인자를 전달하여 객체 생성
    val person = Person("김코틀", 2011)
    
    // 객체는 생성과 동시에 완벽하게 초기화된 상태입니다.
    person.introduce() // 안녕하세요, 저는 김코틀입니다. 2011년에 태어났습니다.
}
```

##### `constructor` 키워드

사실 주 생성자의 완전한 문법은 `class Person constructor(val name: String) { ... }` 입니다. 하지만 생성자에 어노테이션이나 가시성 변경자가 붙지 않는다면, `constructor` 키워드는 관례적으로 생략합니다.

-----

#### 부 생성자 (Secondary Constructor): 추가적인 생성 방법 제공

**부 생성자**는 클래스 본문 내에 `constructor` 키워드로 선언하며, **여러 개를 가질 수 있습니다.** 부 생성자는 보통 주 생성자만으로는 부족한, 특별한 방식의 객체 생성을 지원하기 위해 사용됩니다. 예를 들어, 태어난 해를 입력받지 않으면 기본값으로 처리해주는 생성자를 추가할 수 있습니다.

```kotlin
class Person(val name: String, val birthYear: Int) { // 주 생성자
    
    // 부 생성자
    constructor(name: String) : this(name, 2025) {
        // 부 생성자만의 추가적인 로직이 필요하다면 여기에 작성합니다.
        println("부 생성자가 호출되었습니다. 기본 연도는 2025년입니다.")
    }
}
```

**부 생성자의 핵심 규칙:**
부 생성자는 반드시 **자신이 직접 또는 다른 부 생성자를 통해 궁극적으로 주 생성자를 호출**해야 합니다. 이는 \*\*위임(Delegation)\*\*이라고 부르며, `this(...)` 키워드를 사용해 표현합니다. 모든 생성자는 결국 클래스의 핵심 초기화 로직을 담은 주 생성자를 거치게 되므로, 객체 초기화의 일관성을 보장할 수 있습니다.

```kotlin
fun main() {
    val p1 = Person("Alice", 1990) // 주 생성자 호출
    println("${p1.name} | ${p1.birthYear}")

    println("---")

    val p2 = Person("Bob") // 부 생성자 호출
    // 출력: 부 생성자가 호출되었습니다. 기본 연도는 2025년입니다.
    println("${p2.name} | ${p2.birthYear}")
}
```

출력 결과:

```
Alice | 1990
---
부 생성자가 호출되었습니다. 기본 연도는 2025년입니다.
Bob | 2025
```

**결론적으로**, 클래스를 설계할 때는 객체 생성의 가장 표준적인 방법을 **주 생성자**로 정의하고, 추가적인 편의성을 제공해야 할 경우에만 **부 생성자**를 사용하는 것이 좋습니다. 코틀린의 간결한 주 생성자 문법은 불필요한 코드를 줄이고 객체가 생성 시점부터 온전한 상태를 갖도록 보장하는 매우 강력한 도구입니다.