### 중위 함수(Infix Functions): 자연어에 가까운 코드 작성법

코틀린은 코드의 가독성을 높이기 위한 다채로운 문법을 제공합니다. 그중 \*\*중위 함수(Infix Function)\*\*는 함수 호출을 마치 영어 문장이나 연산자처럼 보이게 만들어, 코드를 훨씬 더 자연스럽게 읽히도록 돕는 특별한 기능입니다.

일반적으로 우리는 `객체.함수이름(인자)` 형태로 함수를 호출합니다.
`10.plus(5)`

중위 함수를 사용하면, 이 호출에서 점(`.`)과 괄호(`()`)를 생략하고, 함수 이름을 객체와 인자 사이에 위치시킬 수 있습니다.
`10 plus 5`

마치 '10에 5를 더한다'라는 문장처럼 읽히지 않나요? 이처럼 중위 표기법(Infix Notation)을 사용하면 코드의 직관성을 크게 향상시킬 수 있습니다.

-----

#### 중위 함수를 만드는 조건

아무 함수나 중위 함수로 사용할 수 있는 것은 아닙니다. 코틀린은 이 기능을 남용하지 않도록 다음과 같은 엄격한 조건을 요구합니다.

1.  반드시 **멤버 함수** 또는 **확장 함수**여야 합니다.
2.  반드시 **단 하나의 파라미터**만 가져야 합니다.
3.  파라미터는 `vararg`이거나 기본값을 가져서는 안 됩니다.
4.  함수 선언 앞에 `infix` 키워드를 붙여야 합니다.

##### 직접 만들어보기: `startsWith` 확장 함수

`String`이 특정 접두사로 시작하는지 확인하는 기능을 중위 함수로 만들어 봅시다.

```kotlin
// String 클래스에 대한 확장 함수로, infix 키워드를 붙입니다.
infix fun String.startsWith(prefix: String): Boolean {
    return this.startsWith(prefix)
}

fun main() {
    val message = "Hello Kotlin"

    // 중위 표기법으로 함수 호출
    val result1 = message startsWith "Hello"
    println(result1) // 출력: true

    // 기존의 표준적인 호출 방식도 여전히 가능합니다.
    val result2 = message.startsWith("Kotlin")
    println(result2) // 출력: false
}
```

`message startsWith "Hello"` 라는 코드는 `message.startsWith("Hello")` 보다 훨씬 더 자연스러운 문장처럼 느껴집니다.

-----

#### 표준 라이브러리 속 중위 함수

중위 함수는 우리가 모르는 사이 이미 자주 사용하고 있던 기능입니다. 코틀린 표준 라이브러리는 가독성을 높이기 위해 여러 곳에서 중위 함수를 적극적으로 활용합니다.

  * **`to`**: 가장 대표적인 중위 함수입니다. 두 값을 `Pair` 객체로 묶어주는 역할을 합니다. `Map`을 초기화할 때 매우 유용합니다.

    ```kotlin
    val capitals = mapOf(
        "대한민국" to "서울", // "대한민국".to("서울") 과 동일
        "일본" to "도쿄",
        "중국" to "베이징"
    )
    ```

  * **범위(Range) 관련 함수**: 3장에서 배운 범위 관련 함수들도 중위 함수입니다.

    ```kotlin
    for (i in 10 downTo 1) { ... } // 10.downTo(1)
    for (i in 1..10 step 2) { ... } // (1..10).step(2)
    ```

  * **비트 연산 함수**: `and`, `or`, `xor` 등 비트 연산을 위한 함수들도 중위 함수로 제공되어 연산자처럼 사용할 수 있습니다.

    ```kotlin
    val result = 10 and 12 // 10.and(12)
    ```

#### 언제 사용해야 할까?

중위 함수는 코드를 아름답게 만들 수 있는 강력한 도구이지만, 무분별하게 사용하면 오히려 가독성을 해칠 수 있습니다.

**사용하기 좋은 경우:**

  * 두 객체 간의 관계가 매우 명확하고, 자연스러운 연산처럼 보일 때 (예: `a to b`, `2 pow 10`)
  * 테스트 코드 등에서 도메인 특화 언어(DSL)를 만들어 문장처럼 읽히는 코드를 작성할 때 (예: `result shouldBe "Success"`)

**주의해야 할 경우:**

  * 함수가 수행하는 역할이 복잡하거나, 이름만 보고 그 기능을 유추하기 어려울 때.
  * 일반적인 함수 호출(`객체.함수()`)이 더 명확하고 익숙하게 느껴질 때.

중위 함수는 코드에 시적인 표현력을 더해주는 매력적인 기능입니다. 적재적소에 현명하게 사용하여 코드의 가독성과 우아함을 한 단계 끌어올려 보시기 바랍니다.