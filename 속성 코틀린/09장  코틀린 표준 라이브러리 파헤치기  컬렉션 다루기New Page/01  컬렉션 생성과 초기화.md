### 컬렉션 생성과 초기화

코틀린은 다양한 상황에 맞춰 컬렉션을 손쉽게 만들고 초기화할 수 있는 여러 유틸리티 함수를 표준 라이브러리에 갖추고 있습니다. 이 함수들을 사용하면 코드를 더 간결하고 의도에 맞게 작성할 수 있습니다.

-----

## 기본 생성 함수: `listOf`, `setOf`, `mapOf`

가장 일반적으로 컬렉션을 만드는 방법은 이미 살펴본 `listOf()`, `setOf()`, `mapOf()` 함수를 사용하는 것입니다. 이 함수들은 인자로 전달된 요소들을 포함하는 **읽기 전용** 컬렉션을 생성합니다.

```kotlin
// List 생성
val numbers = listOf(10, 20, 30)

// Set 생성
val colors = setOf("Red", "Green", "Blue")

// Map 생성
val userMap = mapOf("name" to "Alice", "age" to 30)
```

**변경 가능한** 컬렉션을 만들려면 `mutableListOf()`, `mutableSetOf()`, `mutableMapOf()` 함수를 사용합니다.

```kotlin
val mutableNumbers = mutableListOf(1, 2, 3)
```

-----

## 빈 컬렉션 생성하기

때로는 비어있는 컬렉션을 먼저 만들고 나중에 요소를 추가해야 할 때가 있습니다. 이럴 때는 `emptyList()`, `emptySet()`, `emptyMap()` 함수를 사용하거나, 타입 추론이 가능하도록 타입을 명시하여 생성 함수를 호출할 수 있습니다.

```kotlin
// 읽기 전용 빈 리스트
val emptyList: List<String> = emptyList()

// 변경 가능 빈 리스트
val emptyMutableList = mutableListOf<String>()
```

-----

## 동적으로 컬렉션 생성하기: `buildList`, `buildSet`, `buildMap`

컬렉션을 생성하는 로직이 복잡하여 `if` 문이나 `for` 루프를 사용해야 할 때가 있습니다. 이런 경우에 임시로 변경 가능한 리스트를 만들어 값을 채운 뒤, 최종적으로 읽기 전용 리스트로 반환하는 패턴이 자주 사용됩니다.

코틀린은 `buildList`, `buildSet`, `buildMap` 이라는 함수를 통해 이 과정을 더 효율적이고 안전하게 만들어 줍니다. 이 함수들은 코드 블록 안에서 임시로 **변경 가능한 컬렉션처럼 요소를 추가**할 수 있게 해주고, 코드 블록이 끝나면 최종적으로 **읽기 전용 컬렉션을 반환**합니다.

```kotlin
// 10 미만의 짝수만 담는 읽기 전용 리스트 생성
val evenNumbers: List<Int> = buildList {
    for (i in 0 until 10) {
        if (i % 2 == 0) {
            add(i) // buildList 블록 안에서는 'this'가 MutableList처럼 동작합니다.
        }
    }
}
println(evenNumbers) // 출력: [0, 2, 4, 6, 8]
```

이 방식은 중간 과정에서만 `add`와 같은 변경 작업을 허용하고, 최종 결과물은 불변성을 보장받을 수 있어 코드의 안정성을 높여줍니다.

-----

## 다른 컬렉션 복사하기

기존 컬렉션을 복사하여 새로운 컬렉션을 만들 수도 있습니다. 변환 함수(`toList()`, `toSet()`, `toMutableList()` 등)를 사용하면 됩니다.

```kotlin
val originalList = listOf(1, 2, 3, 2)

// List를 Set으로 변환 (중복이 제거됨)
val numberSet = originalList.toSet()
println(numberSet) // 출력: [1, 2, 3]

// Set을 변경 가능한 List로 변환
val mutableListFromSet = numberSet.toMutableList()
mutableListFromSet.add(4)
println(mutableListFromSet) // 출력: [1, 2, 3, 4]
```

이처럼 코틀린은 다양한 컬렉션 생성 방법을 제공하여, 개발자가 상황에 가장 적합한 방식을 선택하고 유연하게 데이터를 구성할 수 있도록 지원합니다.