## 02. JPA의 역사와 철학: 하이버네이트(Hibernate)에서 자카르타 퍼시스턴스(Jakarta Persistence)까지

JPA는 하늘에서 뚝 떨어진 기술이 아니다. 수많은 개발자들의 고통과, 그 고통을 해결하려는 위대한 시도들이 쌓아 올린 역사의 산물이다. 이 짧은 여정을 이해하면 JPA의 설계 철학을 더 깊이 있게 받아들일 수 있다.

**EJB 2.x Entity Bean, 암흑의 시대**

2000년대 초반, 자바의 표준 엔터프라이즈 기술인 EJB(Enterprise JavaBeans)에도 데이터를 영속화하려는 시도가 있었다. 바로 'EJB 2.x 엔티티 빈'이다. 하지만 이 기술은 표준이라는 이름이 무색할 정도로 끔찍하게 복잡했다. 수많은 설정 파일(XML), 상속해야 하는 인터페이스, 지켜야 할 규약들은 개발자를 비즈니스 로직이 아닌 기술 그 자체에 매몰시켰다. 또한, 무거운 EJB 컨테이너 위에서만 동작했기 때문에 일반 자바 환경에서의 테스트는 거의 불가능에 가까웠다. 성능 문제도 심각했다. 그야말로 개발자들에게는 암흑기였다.

**Hibernate, 한 줄기 빛**

바로 이 암흑기에 개빈 킹(Gavin King)이라는 걸출한 개발자가 **하이버네이트(Hibernate)**라는 오픈소스 ORM 프레임워크를 세상에 내놓았다. 하이버네이트는 EJB 엔티티 빈과는 비교도 할 수 없을 만큼 간단하고 강력했다. 복잡한 XML 대신 어노테이션이나 간단한 XML 매핑 파일을 사용했고, 평범한 자바 객체(POJO, Plain Old Java Object)를 그대로 사용할 수 있었으며, 특정 컨테이너에 종속되지 않아 테스트도 훨씬 쉬웠다.

하이버네이트는 폭발적인 인기를 끌며 순식간에 자바 ORM 시장의 사실상 표준(de facto standard)으로 자리 잡았다. 개발자들은 복잡하고 무거운 EJB 엔티티 빈을 버리고 가볍고 실용적인 하이버네이트를 선택했다.

**JPA, 새로운 표준의 탄생**

자바 표준을 제정하던 그룹(JCP)은 하이버네이트의 성공과 EJB 엔티티 빈의 실패를 목격했다. 그리고 차세대 EJB 3.0 표준을 준비하면서, 데이터 영속화 부분에 대한 새로운 표준을 만들기로 결정한다. 여기서 아주 역사적인 일이 벌어지는데, 바로 **하이버네이트의 창시자인 개빈 킹을 표준 제정 그룹의 리더로 초빙한 것이다.**

결과적으로, 새롭게 탄생한 자바 영속성 표준인 **JPA(Java Persistence API) 1.0**은 하이버네이트의 핵심 기능과 아키텍처를 거의 그대로 계승하게 되었다. JPA는 다음과 같은 중요한 철학을 담고 있다.

* **JPA는 명세(Specification)이고, 하이버네이트는 구현체(Implementation)다.**
    JPA는 `EntityManager` 인터페이스, `@Entity` 어노테이션 등 ORM을 위한 표준 API(껍데기)만을 정의한다. 그리고 하이버네이트는 이 JPA라는 표준 명세를 실제로 구현한 구현체(엔진) 중 하나인 것이다. (마치 자동차 운전법(표준)과 현대차/기아차(구현체)의 관계와 같다.) 하이버네이트 외에도 EclipseLink, DataNucleus 등 여러 JPA 구현체가 존재한다.

이 덕분에 개발자들은 특정 ORM 기술에 종속되지 않고, JPA라는 표준 인터페이스에 의존하여 코드를 작성할 수 있게 되었다.

**Jakarta Persistence, 새로운 시작**

시간이 흘러 자바 EE(Java Enterprise Edition)는 오라클에서 이클립스 재단으로 넘어가게 되었고, **자카르타 EE(Jakarta EE)**라는 새로운 이름으로 재탄생했다. 이 과정에서 JPA 역시 **자카르타 퍼시스턴스(Jakarta Persistence)**로 이름을 바꾸게 되었다.

가장 큰 변화는 패키지 이름이 기존의 `javax.persistence.*`에서 `jakarta.persistence.*`로 변경된 것이다. 우리가 사용하고 있는 스프링 부트 3.x 버전부터는 바로 이 자카르타 퍼시스턴스 표준을 따르고 있다.

이처럼 JPA의 역사는 '복잡한 표준'이 '실용적인 오픈소스'에 패배하고, 그 실용성을 다시 표준으로 끌어안은 매우 흥미로운 과정을 거쳐왔다. 이는 JPA가 탁상공론이 아닌, 철저히 실무의 필요에 의해 다듬어진 기술임을 증명한다. 이제, 2020년대에 들어선 지금 JPA가 여전히 유효한 기술인지 다음 절에서 짚어보자.