# 15장: 미래와 대안: Jakarta Persistence 그리고 그 너머

14장에 걸친 긴 여정이었다. 우리는 객체와 관계형 데이터베이스 사이의 거대한 간극, '패러다임 불일치'에서부터 출발했다. 영속성 컨텍스트라는 JPA의 심장을 해부했고, 다양한 매핑 전략을 통해 객체 모델을 테이블에 새겼다. JPQL과 스프링 데이터 JPA, Querydsl을 넘나들며 원하는 데이터를 자유자재로 낚아챘으며, N+1 문제와 동시성 이슈라는 거친 파도를 넘기 위해 성능 최적화라는 돛을 올렸다. 마지막으로 코틀린이라는 순풍을 받아 더 안전하고 즐겁게 항해하는 법까지 배웠다.

이제 여러분은 JPA라는 배의 모든 것을 마스터한 유능한 항해사다. 이 마지막 장에서는 산 정상에 올라 우리가 지나온 길을 돌아보고, 저 너머의 새로운 대륙을 조망하는 시간을 갖고자 한다.

우리는 먼저 JPA의 새로운 이름인 **Jakarta Persistence**의 최신 동향을 통해 이 기술이 어디로 나아가고 있는지 살펴볼 것이다. 그리고 아무리 강력한 JPA라도 해결하기 어려운 근본적인 한계점들을 정직하게 마주하고, 그 한계를 극복하기 위해 등장한 **jOOQ**, **Kotlin Exposed**, **R2DBC**와 같은 '대안 기술'들의 철학과 장단점을 알아본다.

기술의 세계에 영원한 것은 없다. 하지만 이 장을 통해 여러분은 현재의 기술을 깊이 이해하는 것을 넘어, 미래의 변화를 예측하고 어떤 새로운 기술이 등장하더라도 그 본질을 꿰뚫어 보고 적응할 수 있는 통찰력을 얻게 될 것이다.

---

## 00. Jakarta Persistence: JPA의 현재와 미래 (최신 스펙 동향)

우리가 이 책에서 사용한 모든 어노테이션의 패키지명은 `jakarta.persistence.*`로 시작한다. 2019년, Java EE가 이클립스 재단으로 이관되면서 Jakarta EE로 이름이 바뀌었고, JPA(Java Persistence API) 역시 **자카르타 퍼시스턴스(Jakarta Persistence)**라는 새로운 이름표를 달게 되었다.

이는 단순한 이름 변경 이상의 의미를 갖는다. 오라클 주도의 다소 느렸던 표준화 과정에서 벗어나, 더 개방적이고 활발한 커뮤니티 중심으로 표준이 발전할 수 있는 토대가 마련된 것이다. 실제로 Jakarta Persistence 3.1 (Jakarta EE 10)과 같은 최신 버전에서는 다음과 같이 실용적인 개선이 꾸준히 이루어지고 있다.

* **`UUID` 기본 타입 지원**: 과거에는 UUID를 기본 키로 사용하려면 별도의 컨버터를 만들어야 했지만, 이제는 `@GeneratedValue(strategy = GenerationType.UUID)` 와 같이 표준 기능으로 편하게 사용할 수 있다.
* **JPQL 함수 확장**: `EXTRACT`, `CEILING`, `FLOOR`, `EXP` 등 수학 및 날짜 관련 함수들이 표준 JPQL에 추가되어 데이터베이스 독립적인 함수 사용의 폭이 넓어졌다.

---

### **Jakarta Persistence의 미래는?**

그렇다면 앞으로 Jakarta Persistence는 어떤 방향으로 진화할까? 커뮤니티의 논의를 통해 몇 가지 주요 흐름을 예측해 볼 수 있다.

1.  **더 나은 불변 객체(Immutable Object) 지원**: 코틀린의 `data class`나 자바의 `Record`처럼, 불변성을 가진 데이터 전달 객체(DTO)를 더 쉽게 다루려는 요구가 크다. JPQL의 `new` 명령어 외에, 엔티티 자체를 불변 객체에 가깝게 설계하거나 조회 결과를 더 유연하게 매핑하는 기능이 강화될 것으로 보인다.
2.  **비동기(Asynchronous) API에 대한 고민**: 14장에서 보았듯이, 현재 JPA는 블로킹 I/O 기반이다. 리액티브 프로그래밍 패러다임이 확산되면서, JPA 표준 자체에 비동기/논블로킹 데이터 접근을 위한 API를 추가해야 한다는 논의가 계속되고 있다. (물론 이는 매우 거대한 변화라 단기간에 이루어지기는 어렵다.)
3.  **타입-안전성 강화**: Querydsl이 증명했듯이, 타입-안전한 쿼리는 개발 생산성과 안정성을 극적으로 향상시킨다. Criteria API의 사용성을 개선하거나, 새로운 형태의 타입-세이프 쿼리 빌더를 표준으로 도입하려는 시도가 있을 수 있다.
4.  **클라우드 네이티브 환경 지원 강화**: GraalVM을 이용한 네이티브 이미지 컴파일 최적화, 설정의 유연성 증대 등 현대적인 클라우드 환경에 더 잘 부합하는 방향으로의 개선이 이루어질 것이다.

---

JPA는 2006년에 처음 등장한 오래된 기술이지만, 결코 박물관의 유물이 아니다. Jakarta Persistence라는 새로운 이름 아래, 커뮤니티의 요구를 수용하며 끊임없이 발전하고 있는 살아있는 표준이다. 앞으로도 상당 기간 동안 JVM 생태계에서 관계형 데이터베이스를 다루는 가장 핵심적인 기술의 위치를 굳건히 지킬 것이다.

하지만 이처럼 발전하는 JPA라 할지라도, 그 태생적인 한계는 분명히 존재한다. 다음 절에서는 이 한계점들을 명확히 짚어보자.