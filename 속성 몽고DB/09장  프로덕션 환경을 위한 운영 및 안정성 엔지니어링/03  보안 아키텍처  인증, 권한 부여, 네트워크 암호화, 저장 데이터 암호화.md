## 03. λ³΄μ• μ•„ν‚¤ν…μ²: μΈμ¦, κ¶ν• λ¶€μ—¬, λ„¤νΈμ›ν¬ μ•”νΈν™”, μ €μ¥ λ°μ΄ν„° μ•”νΈν™”

ν„λ€ μ• ν”λ¦¬μΌ€μ΄μ… ν™κ²½μ—μ„ λ°μ΄ν„° λ³΄μ•μ€ λ” μ΄μƒ μ„ νƒμ΄ μ•„λ‹ ν•„μμ…λ‹λ‹¤. λ‹¨ ν• λ²μ λ°μ΄ν„° μ μ¶ μ‚¬κ³ λ” κΈ°μ—…μ μ‹ λΆ°λ„λ¥Ό λ¬΄λ„λ¨λ¦¬κ³ , λ§‰λ€ν• λ²•μ /μ¬μ •μ  μ±…μ„μΌλ΅ μ΄μ–΄μ§ μ μμµλ‹λ‹¤. MongoDBλ” **'μ‹¬μΈµ λ°©μ–΄(Defense in Depth)'** μ „λµμ— κΈ°λ°ν•μ—¬, μ—¬λ¬ λ‹¨κ³„μ λ…λ¦½μ μΈ λ³΄μ• κ³„μΈµμ„ μ κ³µν•¨μΌλ΅μ¨ λ°μ΄ν„°λ¥Ό μ•μ „ν•κ² λ³΄νΈν•©λ‹λ‹¤.

λ§μ•½ ν•λ‚μ λ°©μ–΄μ„ μ΄ λ«λ¦¬λ”λΌλ„, λ‹¤λ¥Έ λ°©μ–΄μ„ μ΄ λ°μ΄ν„°λ¥Ό μ§€μΌλ‚΄λ” μ΄ λ‹¤μΈµμ  λ³΄μ• μ•„ν‚¤ν…μ²λ” λ„¤ κ°€μ§€ ν•µμ‹¬ μ”μ†λ΅ κµ¬μ„±λ©λ‹λ‹¤.

1.  **μΈμ¦ (Authentication):** λ‹Ήμ‹ μ€ λ„κµ¬μΈκ°€?
2.  **κ¶ν• λ¶€μ—¬ (Authorization):** λ‹Ήμ‹ μ€ λ¬΄μ—‡μ„ ν•  μ μλ”κ°€?
3.  **λ„¤νΈμ›ν¬ μ•”νΈν™” (Encryption in Transit):** λ°μ΄ν„° μ΄λ™ μ¤‘ λ³΄νΈ
4.  **μ €μ¥ λ°μ΄ν„° μ•”νΈν™” (Encryption at Rest):** λ°μ΄ν„° μ €μ¥ μ‹ λ³΄νΈ

---

### 1. μΈμ¦ (Authentication): "Who are you?" π‘¤

**μΈμ¦**μ€ λ°μ΄ν„°λ² μ΄μ¤μ— μ ‘μ†ν•λ ¤λ” ν΄λΌμ΄μ–ΈνΈ(μ‚¬μ©μ, μ• ν”λ¦¬μΌ€μ΄μ…)κ°€ μμ‹ μ΄ λ„κµ¬μΈμ§€λ¥Ό μ¦λ…ν•λ” κ³Όμ •μ…λ‹λ‹¤. μ΄λ” λ°μ΄ν„°λ² μ΄μ¤λ΅ λ“¤μ–΄μ¤λ” κ°€μ¥ μ²« λ²μ§Έ κ΄€λ¬Έμ…λ‹λ‹¤. μΈμ¦ κΈ°λ¥μ΄ ν™μ„±ν™”λμ§€ μ•μ€ λ°μ΄ν„°λ² μ΄μ¤λ” ν„κ΄€λ¬Έμ΄ μ—΄λ ¤μλ” μ§‘κ³Ό κ°™μ•„μ„, λ„¤νΈμ›ν¬ μ ‘κ·Όλ§ κ°€λ¥ν•λ‹¤λ©΄ λ„κµ¬λ‚ λ¨λ“  λ°μ΄ν„°μ— μ ‘κ·Όν•  μ μμµλ‹λ‹¤.

* **ν•µμ‹¬ λ©”μ»¤λ‹μ¦:** MongoDBλ” κΈ°λ³Έμ μΌλ΅ **SCRAM(Salted Challenge Response Authentication Mechanism)** λ°©μ‹μ„ μ‚¬μ©ν•μ—¬ μ•„μ΄λ””μ™€ λΉ„λ°€λ²νΈλ¥Ό κ²€μ¦ν•©λ‹λ‹¤. μ΄ λ°©μ‹μ€ μ‹¤μ  λΉ„λ°€λ²νΈλ¥Ό λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ μ§μ ‘ μ „μ†΅ν•μ§€ μ•κ³ , μ•”νΈν•™μ μΈ Challenge-Response κ³Όμ •μ„ κ±°μΉκΈ° λ•λ¬Έμ— μ¤‘κ°„μ— νƒμ·¨λλ”λΌλ„ μ•μ „ν•©λ‹λ‹¤.
* **κ³ κΈ‰ λ©”μ»¤λ‹μ¦:** λ” λ†’μ€ μμ¤€μ λ³΄μ•μ΄ ν•„μ”ν•  κ²½μ°, λΉ„λ°€λ²νΈ λ€μ‹  x.509 μΈμ¦μ„λ¥Ό μ‚¬μ©ν•κ±°λ‚, κΈ°μ—… ν™κ²½μ LDAP/Kerberosμ™€ κ°™μ€ μ¤‘μ•™ μ§‘μ¤‘μ‹ μΈμ¦ μ‹μ¤ν…κ³Ό μ—°λ™ν•  μλ„ μμµλ‹λ‹¤.
* **μ¤‘μ”:** **MongoDB Atlasμ—μ„λ” λ¨λ“  ν΄λ¬μ¤ν„°μ— λ€ν•΄ μΈμ¦ κΈ°λ¥μ΄ κΈ°λ³Έμ μΌλ΅ ν™μ„±ν™” λ° κ°•μ λ©λ‹λ‹¤.**

---

### 2. κ¶ν• λ¶€μ—¬ (Authorization): "What can you do?" π”‘

**κ¶ν• λ¶€μ—¬**λ” μΈμ¦λ μ‚¬μ©μκ°€ μ–΄λ–¤ λ°μ΄ν„°μ— λ€ν•΄ μ–΄λ–¤ μ‘μ—…μ„ μν–‰ν•  μ μλ”μ§€λ¥Ό ν†µμ ν•λ” κ³Όμ •μ…λ‹λ‹¤. μ΄λ” **'μµμ† κ¶ν•μ μ›μΉ™(Principle of Least Privilege)'**μ„ κµ¬ν„ν•λ” ν•µμ‹¬μ μΈ κΈ°λ¥μ…λ‹λ‹¤. μ¦‰, λ¨λ“  μ‚¬μ©μλ” μμ‹ μ μ‘μ—…μ„ μν–‰ν•λ” λ° ν•„μ”ν• μµμ†ν•μ κ¶ν•λ§μ„ κ°€μ Έμ•Ό ν•©λ‹λ‹¤.

* **RBAC (Role-Based Access Control, μ—­ν•  κΈ°λ° μ ‘κ·Ό μ μ–΄):** MongoDBλ” RBAC λ¨λΈμ„ μ‚¬μ©ν•©λ‹λ‹¤.
    * **Privilege (κ¶ν•):** νΉμ • λ¦¬μ†μ¤μ— λ€ν• νΉμ • ν–‰λ™ (μ: `ecommerce` λ°μ΄ν„°λ² μ΄μ¤μ `products` μ»¬λ ‰μ…μ— λ€ν• `find` ν–‰λ™)
    * **Role (μ—­ν• ):** κ¶ν•λ“¤μ λ¬¶μ. MongoDBλ” `read`, `readWrite`, `dbAdmin` λ“± λ―Έλ¦¬ μ •μλ μ—­ν• μ„ μ κ³µν•λ©°, ν•„μ”μ— λ”°λΌ μ»¤μ¤ν…€ μ—­ν• μ„ λ§λ“¤ μ μμµλ‹λ‹¤.
    * **User (μ‚¬μ©μ):** μ‚¬μ©μμ—κ² ν•λ‚ μ΄μƒμ μ—­ν• μ„ λ¶€μ—¬ν•©λ‹λ‹¤.

**λ¨λ²” μ‚¬λ΅€:** κ° λ§μ΄ν¬λ΅μ„λΉ„μ¤λ‚ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ„ν• λ³„λ„μ λ°μ΄ν„°λ² μ΄μ¤ μ‚¬μ©μλ¥Ό μƒμ„±ν•κ³ , ν•΄λ‹Ή μ„λΉ„μ¤ κΈ°λ¥μ— ν•„μ”ν• **μ •ν™•ν• κ¶ν•λ§μ„ κ°€μ§„ μ»¤μ¤ν…€ μ—­ν• **μ„ λ¶€μ—¬ν•΄μ•Ό ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, 'μƒν’ μ΅°ν μ„λΉ„μ¤'λ” `products` μ»¬λ ‰μ…μ— λ€ν• `find` κ¶ν•λ§ κ°€μ Έμ•Ό ν•λ©°, `insert`λ‚ `update` κ¶ν•μ€ μ λ€λ΅ κ°€μ Έμ„λ” μ• λ©λ‹λ‹¤.

---

### 3. λ„¤νΈμ›ν¬ μ•”νΈν™” (Encryption in Transit): λ°μ΄ν„° μ΄λ™ κ²½λ΅ λ³΄νΈ π

μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό λ°μ΄ν„°λ² μ΄μ¤ μ„λ²„ μ‚¬μ΄, λλ” λ ν”λ¦¬μΉ΄ μ…‹ λ©¤λ²„λ“¤ μ‚¬μ΄μ—μ„ λ°μ΄ν„°κ°€ μ΄λ™ν•λ” λ¨λ“  κ²½λ΅λ¥Ό μ•”νΈν™”ν•μ—¬ λ³΄νΈν•λ” κ²ƒμ…λ‹λ‹¤.

* **μ„ν‘:** λ„¤νΈμ›ν¬ μ•”νΈν™”κ°€ μ—†λ‹¤λ©΄, κ³µκ²©μκ°€ λ„¤νΈμ›ν¬ νΈλν”½μ„ λ„μ²­(sniffing)ν•μ—¬ μ‚¬μ©μμ λΉ„λ°€λ²νΈλ‚ κ°μΈμ •λ³΄μ™€ κ°™μ€ λ―Όκ°ν• λ°μ΄ν„°λ¥Ό ν‰λ¬Έ κ·Έλ€λ΅ νƒμ·¨ν•  μ μμµλ‹λ‹¤.
* **ν•΄κ²°μ±…: TLS/SSL (Transport Layer Security):** MongoDBλ” μ—…κ³„ ν‘μ¤€μΈ TLS/SSLμ„ μ‚¬μ©ν•μ—¬ λ¨λ“  λ„¤νΈμ›ν¬ ν†µμ‹ μ„ μ•”νΈν™”ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ 3μκ°€ λ°μ΄ν„°λ¥Ό μ—Ώλ“£λ” κ²ƒ(**κΈ°λ°€μ„±**), μ¤‘κ°„μ— λ°μ΄ν„°λ¥Ό λ³€μ΅°ν•λ” κ²ƒ(**λ¬΄κ²°μ„±**), κ·Έλ¦¬κ³  ν΄λΌμ΄μ–ΈνΈκ°€ μ„μ¥λ μ„λ²„μ— μ ‘μ†ν•λ” κ²ƒ(**μ„λ²„ μΈμ¦**)μ„ λ¨λ‘ λ°©μ§€ν•©λ‹λ‹¤.
* **μ¤‘μ”:** **MongoDB Atlasμ—μ„λ” λ¨λ“  ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ— λ€ν•΄ TLS/SSL μ•”νΈν™”κ°€ κΈ°λ³Έμ μΌλ΅ ν™μ„±ν™” λ° κ°•μ λ©λ‹λ‹¤.**

---

### 4. μ €μ¥ λ°μ΄ν„° μ•”νΈν™” (Encryption at Rest): μ μλ” λ°μ΄ν„° λ³΄νΈ π΄

λ°μ΄ν„°λ² μ΄μ¤ νμΌμ΄ λ””μ¤ν¬μ— μ €μ¥λμ–΄ μλ” μƒνƒμ—μ„ λ°μ΄ν„°λ¥Ό λ³΄νΈν•λ” κ²ƒμ…λ‹λ‹¤.

* **μ„ν‘:** κ³µκ²©μκ°€ μ„λ²„μ λ¬Όλ¦¬μ  λ””μ¤ν¬λ‚ λ°±μ—… ν…μ΄ν”„λ¥Ό νƒμ·¨ν–μ„ κ²½μ°, μΈμ¦/κ¶ν• λ¶€μ—¬ λ‹¨κ³„λ¥Ό μ°νν•μ—¬ λ°μ΄ν„° νμΌ μμ²΄λ¥Ό μ§μ ‘ μ½μ–΄ λ‚΄μ©μ„ λΉΌλ‚Ό μ μμµλ‹λ‹¤.
* **ν•΄κ²°μ±…: TDE (Transparent Data Encryption):** WiredTiger μ¤ν† λ¦¬μ§€ μ—”μ§„μ€ μ €μ¥μ† λ λ²¨μ—μ„ λ°μ΄ν„°λ¥Ό μλ™μΌλ΅ μ•”νΈν™”ν•λ” κΈ°λ¥μ„ μ§€μ›ν•©λ‹λ‹¤. μ΄ κΈ°λ¥μ΄ ν™μ„±ν™”λλ©΄, λ¨λ“  λ°μ΄ν„° νμΌ(μ»¬λ ‰μ…, μΈλ±μ¤, μ €λ„)μ€ λ””μ¤ν¬μ— μ“°μ—¬μ§€κΈ° μ „μ— μ•”νΈν™”λκ³ , λ©”λ¨λ¦¬λ΅ μ½μ–΄μ¬ λ• λ³µνΈν™”λ©λ‹λ‹¤. μ΄ κ³Όμ •μ€ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ™„μ „ν ν¬λ…ν•κ²(transparent) μ΄λ£¨μ–΄μ§‘λ‹λ‹¤.
* **ν‚¤ κ΄€λ¦¬:** μ €μ¥ λ°μ΄ν„° μ•”νΈν™”μ λ³΄μ• μμ¤€μ€ μ•”νΈν™” ν‚¤λ¥Ό μ–Όλ§λ‚ μ•μ „ν•κ² κ΄€λ¦¬ν•λλƒμ— λ‹¬λ ¤μμµλ‹λ‹¤. MongoDBλ” AWS KMS, Azure Key Vault, Google Cloud KMSμ™€ κ°™μ€ μ™Έλ¶€ ν‚¤ κ΄€λ¦¬ μ„λΉ„μ¤(KMIP)μ™€ μ—°λ™ν•μ—¬ λ§μ¤ν„° ν‚¤λ¥Ό μ•μ „ν•κ² λ³΄κ΄€ν•κ³  κµμ²΄ν•λ” κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.
* **μ¤‘μ”:** **MongoDB Atlasμ—μ„λ” λ¨λ“  ν΄λ¬μ¤ν„°μ— λ€ν•΄ μ €μ¥ λ°μ΄ν„° μ•”νΈν™”κ°€ κΈ°λ³Έμ μΌλ΅ ν™μ„±ν™”λ©λ‹λ‹¤.**

μ΄ λ„¤ κ°€μ§€ λ³΄μ• κ³„μΈµμ„ λ¨λ‘ μ μ©ν•¨μΌλ΅μ¨, MongoDBλ” λ―Όκ°ν• λ°μ΄ν„°λ¥Ό λ‹¤λ£¨λ” μ—”ν„°ν”„λΌμ΄μ¦κΈ‰ μ• ν”λ¦¬μΌ€μ΄μ…μ μ—„κ²©ν• λ³΄μ• μ”κµ¬μ‚¬ν•­μ„ μ¶©μ΅±μ‹ν‚¤λ” κ²¬κ³ ν• λ°μ΄ν„° ν”λ«νΌμ„ κµ¬μ¶•ν•  μ μμµλ‹λ‹¤.